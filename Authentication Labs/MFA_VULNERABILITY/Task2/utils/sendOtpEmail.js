const nodemailer = require('nodemailer');

/**
 * Test-only SMTP transport
 * For labs, you can use a free SMTP relay or Ethereal
 */
const transporter = nodemailer.createTransport({
  host: 'smtp.gmail.com',
  port: 587,
  auth: {
    user: 'yourgmailaccount',
    pass: 'app password'
  }
});

async function sendOtpEmail(to, otp) {
  await transporter.sendMail({
    from: '"Auth System" <no-reply@auth.local>',
    to,
    subject: 'Your verification code',
    text: `Your verification code is: ${otp}`,
    html: `
      <p>Your verification code is:</p>
      <h2 style="letter-spacing:3px">${otp}</h2>
      <p>If you did not request this, ignore this email.</p>
    `
  });
}

module.exports = sendOtpEmail;
